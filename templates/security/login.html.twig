{% extends 'base.html.twig' %}

{% block title %}Log in!
{% endblock %}

{% block body %}
	<section class='backRegister'>
		<div class='container-md'>
			<div class='row'>
				<div class='col-md-6 text-center align-self-center pb-5 pt-5 pt-sm-2 text-white'>
					<div class="login">
						<div class="card-connection px-2 py-5 ">
							<h4 class="mb-4 pb-3 h4">Connection</h4>
							<form method="post">
								{% if error %}
									<div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
								{% endif %}

								{% if app.user %}
									<div class="mb-3">
										Déja connecter avec
										{{ app.user.userIdentifier }},
										<a class='vv' href="{{ path('app_logout') }}">Déconnecter</a>
									</div>
								{% endif %}
								<div class="form-group">
									<input class='form-style' type="email" placeholder="Email" value="{{ last_username }}" autocomplete="off" name="email" id="inputEmail" autocomplete="email" required autofocus>
									<i class="input-icon uil uil-at"></i>

								</div>
								<div class="form-group mt-2">
									<input class='form-style' type="password" name="password" placeholder="Mot de Passe" id="inputPassword" class="form-control" autocomplete="current-password" autocomplete="off" required>

									<i class="input-icon uil uil-lock-alt"></i>

								</div>
								<div class="my-4 ">
									<label>
										<input type="checkbox" class="check" name="_remember_me">
										Se souvenir de moi
									</label>
								</div>
								<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

								<button class="btn btn-lg " type="submit">
									Connecter
								</button>
								<p class='pt-2'>Première connexion ?
								</p>
								<a class='vv' href="{{ path('app_register') }}">créer voutre compte</a>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
{% block script %}
	 <script>
								document.addEventListener("DOMContentLoaded", function() {
							    const tabs = document.querySelectorAll(".switch-tabs .tab");
							    const checkbox = document.getElementById("reg-log");
							
							    tabs.forEach(tab => {
							        tab.addEventListener("click", function() {
							            tabs.forEach(t => t.classList.remove("tab-active"));
							            this.classList.add("tab-active");
							
							            if (this.textContent.trim() === "Inscription") {
							                checkbox.checked = true;
							            } else {
							                checkbox.checked = false;
							            }
							
							            updateTabBackgrounds();
							        });
							    });
							
							    // Update backgrounds when the checkbox is changed
							    checkbox.addEventListener("change", function() {
							        updateTabBackgrounds();
							    });
							
							    // Initialize the active tab based on checkbox state
							    if (checkbox.checked) {
							        tabs[1].classList.add("tab-active");
							    } else {
							        tabs[0].classList.add("tab-active");
							    }
							
							    updateTabBackgrounds();
							
							    function updateTabBackgrounds() {
							        if (checkbox.checked) {
							            tabs[1].style.backgroundColor = "#ff9901";
							            tabs[1].style.color = "#fff";
							            tabs[0].style.backgroundColor = "#242f40";
							            tabs[0].style.color = "#fff";
							        } else {
							            tabs[0].style.backgroundColor = "#ff9901";
							            tabs[0].style.color = "#fff";
							            tabs[1].style.backgroundColor = "#242f40";
							            tabs[1].style.color = "#fff";
							        }
							    }
							});
							
							 </script>
{% endblock %}{% endblock %}
